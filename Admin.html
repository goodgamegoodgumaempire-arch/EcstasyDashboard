<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel - ECSTASY ROMANIA</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
* { box-sizing: border-box; margin:0; padding:0; }
body {
    font-family:'Roboto',sans-serif;
    background: linear-gradient(135deg,#0b0c17,#1b1f38,#4fc3f7);
    background-size: 400% 400%;
    animation: gradientBG 20s ease infinite;
    color:#fff;
    min-height:100vh;
    display:flex;
}
@keyframes gradientBG { 0%{background-position:0% 50%;} 50%{background-position:100% 50%;} 100%{background-position:0% 50%;} }
.sidebar {
    width:220px; background: rgba(17,17,17,0.6); padding:30px 10px; display:flex; flex-direction:column; align-items:center; height:100vh; position:fixed; top:0; left:0; backdrop-filter: blur(10px); box-shadow: 2px 0 15px rgba(0,0,0,0.5);
}
.sidebar h2 { color:#ff6600; margin-bottom:30px; text-align:center; }
.sidebar button { background:none; border:none; color:#fff; padding:12px 20px; width:100%; text-align:left; margin:5px 0; border-radius:8px; font-weight:bold; cursor:pointer; transition:0.3s; }
.sidebar button.active, .sidebar button:hover { background:#ff6600; color:#000; }
.main { margin-left:220px; padding:20px; flex:1; }
form { background: rgba(17,17,17,0.7); padding:20px; border-radius:12px; max-width:600px; margin:20px auto; box-shadow: 0 4px 15px rgba(0,0,0,0.5); }
form input, form select, form textarea { width:100%; padding:12px; margin:10px 0; border:none; border-radius:8px; background:#222; color:#fff; }
form input::placeholder, form textarea::placeholder { color:#bbb; }
form button { background:#ff6600; border:none; padding:12px; width:100%; border-radius:8px; color:#fff; font-weight:bold; cursor:pointer; transition:0.3s; }
form button:hover { background:#cc5200; }
.list { max-width:900px; margin:20px auto; }
.item { background: rgba(17,17,17,0.6); margin:10px 0; padding:15px; border-radius:10px; display:flex; justify-content:space-between; align-items:center; transition:0.3s; }
.item:hover { background: rgba(17,17,17,0.9); }
.item img, .item video { border-radius:8px; }
.item img { width:50px; height:50px; object-fit:cover; }
.item video { width:120px; }
.item-info { display:flex; align-items:center; gap:15px; flex-wrap: wrap; }
.item-actions button { margin-left:8px; border:none; padding:6px 12px; cursor:pointer; border-radius:6px; font-weight:bold; transition:0.2s; }
.delete-btn { background:#ff4444; color:#fff; }
.delete-btn:hover { background:#cc0000; }
.edit-btn { background:#ff6600; color:#fff; }
.edit-btn:hover { background:#cc5200; }
@media(max-width:800px){ .sidebar { width:100%; height:auto; flex-direction:row; justify-content:space-around; padding:10px;} .main { margin-left:0; } .item-info { flex-direction:column; align-items:flex-start; } }
</style>
</head>
<body>

<div class="sidebar">
    <h2>ECSTASY ADMIN</h2>
    <button onclick="showTab('staff')" id="btn-staff" class="active">Staff</button>
    <button onclick="showTab('updates')" id="btn-updates">Update-uri</button>
    <button onclick="showTab('sneak')" id="btn-sneak">Sneak Peeks</button>
</div>

<div class="main">
    <h1>Admin Panel - ECSTASY ROMANIA</h1>

    <!-- Staff -->
    <div id="staff" class="tab">
        <h2>Staff Manager</h2>
        <form id="staffForm">
            <input type="text" id="name" placeholder="Nume jucător" required>
            <input type="text" id="rank" placeholder="Grad" required>
            <input type="text" id="img" placeholder="Link poză/GIF" required>
            <select id="group" required>
                <option value="">Selectează grup</option>
                <option value="COMMUNITY OWNERS">Community Owners</option>
                <option value="CO FOUNDERS">Co Founders</option>
                <option value="MANAGER STAFF">Manager Staff</option>
                <option value="ADMINISTRATORS">Administrators</option>
                <option value="MODERATORS">Moderators</option>
                <option value="HELPERS">Helpers</option>
                <option value="TRYAL HELPERS">Tryal Helpers</option>
            </select>
            <button type="submit">Adaugă Membru</button>
        </form>
        <div id="members" class="list"></div>
    </div>

    <!-- Updates -->
    <div id="updates" class="tab" style="display:none;">
        <h2>Update-uri Manager</h2>
        <form id="updateForm">
            <input type="text" id="updateTitle" placeholder="Titlu update" required>
            <textarea id="updateMessage" placeholder="Mesaj update" required></textarea>
            <input type="text" id="updateImg" placeholder="Link poză/video (opțional)">
            <button type="submit">Adaugă Update</button>
        </form>
        <div id="updatesList" class="list"></div>
    </div>

    <!-- Sneak Peeks -->
    <div id="sneak" class="tab" style="display:none;">
        <h2>Sneak Peeks Manager</h2>
        <form id="sneakForm">
            <textarea id="sneakMessage" placeholder="Mesaj sneak peek"></textarea>
            <input type="text" id="sneakUrl" placeholder="Link poză/video/link">
            <select id="sneakType">
                <option value="message">Doar mesaj</option>
                <option value="image">Imagine</option>
                <option value="video">Video</option>
                <option value="link">Link</option>
            </select>
            <button type="submit">Adaugă Sneak Peek</button>
        </form>
        <div id="sneakList" class="list"></div>
    </div>
</div>

<script>
/* Tabs */
function showTab(tab){
    document.querySelectorAll(".tab").forEach(d=>d.style.display="none");
    document.querySelectorAll(".sidebar button").forEach(b=>b.classList.remove("active"));
    document.getElementById(tab).style.display="block";
    document.getElementById("btn-"+tab).classList.add("active");
}

/* JSON URLs */
const STAFF_JSON = "https://raw.githubusercontent.com/UTILIZATOR/REPO/main/staff.json";
const UPDATES_JSON = "https://raw.githubusercontent.com/UTILIZATOR/REPO/main/updates.json";
const SNEAK_JSON = "https://raw.githubusercontent.com/UTILIZATOR/REPO/main/sneakpeeks.json";

/* --- Staff --- */
let staffData = [];
const staffForm = document.getElementById("staffForm");
const membersDiv = document.getElementById("members");
let editStaffIndex=null;

async function fetchStaff(){
    const res = await fetch(STAFF_JSON);
    staffData = await res.json();
    renderMembers();
}

function renderMembers(){
    membersDiv.innerHTML="";
    staffData.forEach((m,i)=>{
        const div=document.createElement("div");
        div.classList.add("item");
        div.innerHTML=`<div class="item-info">
            <img src="${m.img}" alt="${m.name}">
            <div><strong>${m.name}</strong> - ${m.rank} (${m.group})</div>
        </div>
        <div class="item-actions">
            <button class="edit-btn" onclick="editMember(${i})">Editează</button>
            <button class="delete-btn" onclick="deleteMember(${i})">Șterge</button>
        </div>`;
        membersDiv.appendChild(div);
    });
}

staffForm.addEventListener("submit", function(e){
    e.preventDefault();
    const name=document.getElementById("name").value;
    const rank=document.getElementById("rank").value;
    const img=document.getElementById("img").value;
    const group=document.getElementById("group").value;
    if(editStaffIndex===null) staffData.push({name,rank,img,group});
    else { staffData[editStaffIndex]={name,rank,img,group}; editStaffIndex=null; staffForm.querySelector("button").innerText="Adaugă Membru";}
    renderMembers(); staffForm.reset();
});

function deleteMember(i){ staffData.splice(i,1); renderMembers();}
function editMember(i){ const m=staffData[i]; document.getElementById("name").value=m.name; document.getElementById("rank").value=m.rank; document.getElementById("img").value=m.img; document.getElementById("group").value=m.group; editStaffIndex=i; staffForm.querySelector("button").innerText="Salvează Modificările"; }

fetchStaff();
</script>
</body>
</html>

<!-- SANC»öIUNI -->
<div id="sanctions" class="tab">
  <h2>Sanc»õiuni Membri</h2>
  <div id="sanctionsList" class="list"></div>
</div>

<script>
// --- SANC»öIUNI ---
let sanctions = JSON.parse(localStorage.getItem("pdSanctions")) || [];

function renderSanctions() {
  const container = document.getElementById("sanctionsList");
  container.innerHTML = "";

  members.forEach((m) => {
    const div = document.createElement("div");
    div.classList.add("item");

    // Calcul absen»õe
    const memberSanctions = sanctions.filter(s => s.member === m.name);
    const absenteCount = memberSanctions.filter(s => s.absenta === "Absent la »ôedin»õƒÉ").length;

    div.innerHTML = `<strong>${m.name}</strong> - Absen»õe: <span class="status">${absenteCount}</span>`;

    // Input pentru adƒÉugare sanc»õiune
    const input = document.createElement("input");
    input.type = "text";
    input.placeholder = "Sanc»õiune / Observa»õie";

    const selectAbs = document.createElement("select");
    ["Prezent", "Absent la »ôedin»õƒÉ"].forEach(s => {
      const opt = document.createElement("option");
      opt.value = s;
      opt.innerText = s;
      selectAbs.appendChild(opt);
    });

    const addBtn = document.createElement("button");
    addBtn.className = "edit-btn";
    addBtn.innerText = "AdaugƒÉ";
    addBtn.onclick = () => {
      if (!input.value.trim()) return;
      sanctions.push({
        member: m.name,
        text: input.value.trim(),
        absenta: selectAbs.value
      });
      localStorage.setItem("pdSanctions", JSON.stringify(sanctions));
      input.value = "";
      selectAbs.selectedIndex = 0;
      renderSanctions();
    };

    const sancList = document.createElement("div");
    memberSanctions.forEach((s) => {
      const sdiv = document.createElement("div");
      sdiv.style.display = "flex";
      sdiv.style.justifyContent = "space-between";
      sdiv.style.marginTop = "4px";
      sdiv.innerHTML = `${s.text} (${s.absenta})`;

      const delBtn = document.createElement("button");
      delBtn.className = "delete-btn";
      delBtn.innerText = "üóë";
      delBtn.onclick = () => {
        sanctions = sanctions.filter(san => san !== s);
        localStorage.setItem("pdSanctions", JSON.stringify(sanctions));
        renderSanctions();
      };

      sdiv.appendChild(delBtn);
      sancList.appendChild(sdiv);
    });

    div.appendChild(input);
    div.appendChild(selectAbs);
    div.appendChild(addBtn);
    div.appendChild(sancList);

    container.appendChild(div);
  });
}
</script>

<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PanelPD - Poli»õie ECSTASY</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
body { font-family:'Roboto',sans-serif; background:#0b0c17; color:#fff; min-height:100vh; display:flex; margin:0;}
.sidebar { width:220px; background: rgba(17,17,17,0.8); padding:20px; display:flex; flex-direction:column; height:100vh; }
.sidebar h2 { color:#ff6600; margin-bottom:20px; text-align:center; }
.sidebar button { background:none; border:none; color:#fff; padding:12px 10px; margin:5px 0; text-align:left; border-radius:8px; cursor:pointer; font-weight:bold; transition:0.3s;}
.sidebar button.active, .sidebar button:hover { background:#ff6600; color:#000; }
.main { flex:1; padding:20px; overflow-y:auto;}
form input, form select, form textarea { width:100%; margin:5px 0; padding:8px; border-radius:8px; border:none; background:#222; color:#fff;}
form button { margin-top:10px; padding:10px; border:none; border-radius:8px; background:#ff6600; color:#fff; font-weight:bold; cursor:pointer; }
form button:hover { background:#cc5200; }
.list { max-width:900px; margin-top:20px;}
.item { background: rgba(17,17,17,0.7); margin:10px 0; padding:12px; border-radius:8px; display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap;}
.item-actions button { margin-left:6px; padding:6px 12px; border:none; border-radius:6px; cursor:pointer; font-weight:bold;}
.accept-btn { background:#28a745; color:#fff; } .accept-btn:hover { background:#218838; }
.reject-btn { background:#dc3545; color:#fff; } .reject-btn:hover { background:#c82333; }
.delete-btn { background:#ff4444; color:#fff; } .delete-btn:hover { background:#cc0000; }
.model-card { display:flex; align-items:center; margin-bottom:10px; background: rgba(34,34,34,0.8); padding:8px; border-radius:8px; }
.model-card input { flex:1; margin-right:10px;}
.add-btn { margin-top:12px; background:#28a745; color:#fff; border:none; padding:10px 15px; border-radius:8px; cursor:pointer; }
</style>
</head>
<body>

<div class="sidebar">
  <h2>Panel Poli»õie</h2>
  <button onclick="showTab('membri')" id="btn-membri" class="active">Membri</button>
  <button onclick="showTab('sanc»õiuni')" id="btn-sanc»õiuni">Sanc»õiuni</button>
  <button onclick="showTab('aplica»õii')" id="btn-aplica»õii">Aplica»õii</button>
  <button onclick="showTab('model')" id="btn-model">Model Aplica»õie</button>
</div>

<div class="main">
  <h1>Panel Poli»õie ECSTASY</h1>

  <!-- Membri -->
  <div id="membri" class="tab">
    <h2>Lista Membri</h2>
    <form id="membriForm">
      <input type="text" id="membruName" placeholder="Nume membru" required>
      <select id="membruStatus" required>
        <option value="">SelecteazƒÉ status</option>
        <option value="Activ">Activ</option>
        <option value="Inactiv">Inactiv</option>
        <option value="Concediu">Concediu</option>
      </select>
      <button type="submit">AdaugƒÉ membru</button>
    </form>
    <div id="membriList" class="list"></div>
  </div>

  <!-- Sanc»õiuni -->
  <div id="sanc»õiuni" class="tab" style="display:none;">
    <h2>Sanc»õiuni Membri</h2>
    <div id="sanc»õiuniList" class="list"></div>
  </div>

  <!-- Aplica»õii -->
  <div id="aplica»õii" class="tab" style="display:none;">
    <h2>Aplica»õii Poli»õie</h2>
    <div id="applications" class="list"></div>
  </div>

  <!-- Model aplica»õie -->
  <div id="model" class="tab" style="display:none;">
    <h2>SeteazƒÉ Model Aplica»õie</h2>
    <form id="modelForm">
      <div id="modelFields"></div>
      <button type="submit">SalveazƒÉ Model</button>
    </form>
  </div>
</div>

<script>
// --- TAB NAV ---
function showTab(tab){
  document.querySelectorAll(".tab").forEach(div=>div.style.display="none");
  document.querySelectorAll(".sidebar button").forEach(btn=>btn.classList.remove("active"));
  document.getElementById(tab).style.display="block";
  document.getElementById("btn-"+tab).classList.add("active");
}

// --- Membri ---
let membri = JSON.parse(localStorage.getItem("pdMembri")) || [];
const membriForm = document.getElementById("membriForm");
const membriList = document.getElementById("membriList");
let editIndex = null;

function renderMembri(){
  membriList.innerHTML="";
  membri.forEach((m,i)=>{
    const div = document.createElement("div");
    div.className="item";
    div.innerHTML = `<div><strong>${m.name}</strong> - Status: ${m.status}</div>`;
    const actions = document.createElement("div");
    const statusSelect = document.createElement("select");
    ["Activ","Inactiv","Concediu"].forEach(s=>{
      const option = document.createElement("option");
      option.value=s; option.innerText=s;
      if(s===m.status) option.selected=true;
      statusSelect.appendChild(option);
    });
    statusSelect.onchange = ()=>{ m.status = statusSelect.value; saveMembri(); renderSanc»õiuni(); };
    const editBtn = document.createElement("button"); editBtn.innerText="EditeazƒÉ"; editBtn.className="accept-btn";
    editBtn.onclick = ()=>{ document.getElementById("membruName").value=m.name; document.getElementById("membruStatus").value=m.status; editIndex=i; membriForm.querySelector("button").innerText="SalveazƒÉ"; };
    const delBtn = document.createElement("button"); delBtn.innerText="»òterge"; delBtn.className="delete-btn";
    delBtn.onclick = ()=>{ membri.splice(i,1); saveMembri(); renderMembri(); renderSanc»õiuni(); };
    actions.appendChild(statusSelect); actions.appendChild(editBtn); actions.appendChild(delBtn);
    div.appendChild(actions);
    membriList.appendChild(div);
  });
}

membriForm.addEventListener("submit", e=>{
  e.preventDefault();
  const name = document.getElementById("membruName").value.trim();
  const status = document.getElementById("membruStatus").value;
  if(editIndex===null) membri.push({name,status});
  else { membri[editIndex]={name,status}; editIndex=null; membriForm.querySelector("button").innerText="AdaugƒÉ membru"; }
  document.getElementById("membruName").value="";
  document.getElementById("membruStatus").value="";
  saveMembri(); renderMembri(); renderSanc»õiuni();
});

function saveMembri(){ localStorage.setItem("pdMembri",JSON.stringify(membri)); }

// --- Sanc»õiuni ---
let sanctiuni = JSON.parse(localStorage.getItem("pdSanctiuni")) || [];

function renderSanc»õiuni(){
  const container = document.getElementById("sanc»õiuniList");
  container.innerHTML="";
  membri.forEach((m,i)=>{
    const div = document.createElement("div");
    div.className="item";
    div.innerHTML=`<div><strong>${m.name}</strong></div>`;
    const actions = document.createElement("div");
    const input = document.createElement("input"); input.placeholder="Introduce»õi sanc»õiune";
    const absenta = document.createElement("select");
    ["Nicio Absen»õƒÉ","Absent Sedin»õƒÉ"].forEach(o=>{
      const option = document.createElement("option"); option.value=o; option.innerText=o;
      absenta.appendChild(option);
    });
    const addBtn = document.createElement("button"); addBtn.className="edit-btn"; addBtn.innerText="AdaugƒÉ";
    addBtn.onclick=()=>{
      const text = input.value.trim();
      if(text) sanctiuni.push({staffName:m.name,text,absenta:absenta.value});
      localStorage.setItem("pdSanctiuni",JSON.stringify(sanctiuni));
      input.value=""; absenta.selectedIndex=0;
      renderSanc»õiuni();
    }
    const sancList = document.createElement("div"); sancList.style.marginTop="8px";
    sanctiuni.filter(s=>s.staffName===m.name).forEach((s,j)=>{
      const span = document.createElement("div"); span.style.display="flex"; span.style.justifyContent="space-between"; span.style.marginTop="4px";
      span.innerHTML=`<span>${s.text} - ${s.absenta}</span>`;
      const delBtn = document.createElement("button"); delBtn.className="delete-btn"; delBtn.innerText="üóë";
      delBtn.onclick=()=>{ sanctiuni.splice(sanctiuni.indexOf(s),1); localStorage.setItem("pdSanctiuni",JSON.stringify(sanctiuni)); renderSanc»õiuni(); }
      span.appendChild(delBtn);
      sancList.appendChild(span);
    });

    actions.appendChild(input); actions.appendChild(absenta); actions.appendChild(addBtn);
    div.appendChild(actions);
    div.appendChild(sancList);
    container.appendChild(div);
  });
}

// --- Aplica»õii ---
function renderAplicatii(){
  const container = document.getElementById("applications");
  container.innerHTML="";
  aplicatii.forEach((a,i)=>{
    if(a.type!=="politie") return;
    const div=document.createElement("div"); div.className="item";
    let content=`<div><strong>${a.name}</strong> - Status: ${a.status || "√én a»ôteptare"}<br>`;
    if(a.answers){
      a.answers.forEach((ans,j)=>{
        content+=`<strong>${modelPolitie[j] || "√éntrebare "+(j+1)}:</strong> ${ans}<br>`;
      });
    }
    content+="</div>"; div.innerHTML=content;
    const actions=document.createElement("div"); actions.className="item-actions";
    const accept=document.createElement("button"); accept.className="accept-btn"; accept.innerText="AcceptƒÉ";
    accept.onclick=()=>{ a.status="Acceptat"; saveAplicatii(); };
    const reject=document.createElement("button"); reject.className="reject-btn"; reject.innerText="Respinge";
    reject.onclick=()=>{ a.status="Respins"; saveAplicatii(); };
    const del=document.createElement("button"); del.className="delete-btn"; del.innerText="»òterge";
    del.onclick=()=>{ aplicatii.splice(i,1); saveAplicatii(); };
    actions.appendChild(accept); actions.appendChild(reject); actions.appendChild(del);
    div.appendChild(actions);
    container.appendChild(div);
  });
}

function saveAplicatii(){ localStorage.setItem("aplicatii",JSON.stringify(aplicatii)); renderAplicatii(); }

// --- Model aplica»õie ---
function renderModelInputs(){
  const container=document.getElementById("modelFields");
  container.innerHTML="";
  modelPolitie.forEach((field,index)=>{
    const wrapper=document.createElement("div"); wrapper.className="model-card";
    const input=document.createElement("input"); input.value=field;
    input.oninput=e=>modelPolitie[index]=e.target.value;
    wrapper.appendChild(input);
    const delBtn=document.createElement("button"); delBtn.type="button"; delBtn.innerText="üóë"; delBtn.onclick=()=>{ modelPolitie.splice(index,1); renderModelInputs(); };
    wrapper.appendChild(delBtn);
    container.appendChild(wrapper);
  });
  const addBtn=document.createElement("button"); addBtn.type="button"; addBtn.className="add-btn"; addBtn.innerText="‚ûï AdaugƒÉ √Æntrebare";
  addBtn.onclick=()=>{ modelPolitie.push(""); renderModelInputs(); };
  container.appendChild(addBtn);
}

document.getElementById("modelForm").addEventListener("submit",e=>{
  e.preventDefault();
  modelPolitie=modelPolitie.map(f=>f.trim()).filter(f=>f!=="");
  localStorage.setItem("modelPolitie",JSON.stringify(modelPolitie));
  alert("Model aplica»õie Poli»õie salvat!");
});

// --- INIT ---
renderMembri(); renderSanc»õiuni(); renderAplicatii(); renderModelInputs();
</script>

</body>
</html>

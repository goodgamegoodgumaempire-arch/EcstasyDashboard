<!-- MEMBRI -->
<div id="members" class="tab active">
  <h2>Lista Membri</h2>
  <form id="memberForm">
    <input type="text" id="memberName" placeholder="Nume membru" required>
    <input type="text" id="memberRank" placeholder="Grad membru" required>
    <select id="memberStatus">
      <option value="Activ">Activ</option>
      <option value="Inactiv">Inactiv</option>
      <option value="Concediu">Concediu</option>
    </select>
    <button type="submit">Adaugă membru</button>
  </form>
  <div id="membersList" class="list"></div>
</div>

<script>
// --- MEMBRI ---
let members = JSON.parse(localStorage.getItem("pdMembers")) || [];
const membersForm = document.getElementById("memberForm");
const membersDiv = document.getElementById("membersList");

function renderMembers(){
  membersDiv.innerHTML="";
  members.forEach((m,i)=>{
    const div = document.createElement("div");
    div.classList.add("item");
    div.innerHTML = `<div>${m.name} - ${m.rank} - Status: <strong>${m.status}</strong></div>`;
    
    // Input pentru modificarea Gradului
    const rankInput = document.createElement("input");
    rankInput.type = "text";
    rankInput.value = m.rank;
    rankInput.style.marginTop = "5px";
    rankInput.onchange = ()=>{ 
      members[i].rank = rankInput.value.trim(); 
      saveMembers(); 
    };

    // Select Status
    const statusSelect = document.createElement("select");
    ["Activ","Inactiv","Concediu"].forEach(s=>{
      const opt = document.createElement("option"); opt.value=s; opt.innerText=s;
      if(s===m.status) opt.selected=true;
      statusSelect.appendChild(opt);
    });
    statusSelect.onchange = ()=>{ members[i].status=statusSelect.value; saveMembers(); };

    // Buton Ștergere
    const delBtn = document.createElement("button"); delBtn.className="delete-btn"; delBtn.innerText="Șterge";
    delBtn.onclick = ()=>{
      members.splice(i,1);
      saveMembers();
      renderSanctions();
    };

    div.appendChild(rankInput);
    div.appendChild(statusSelect);
    div.appendChild(delBtn);
    membersDiv.appendChild(div);
  });
}

membersForm.addEventListener("submit", e=>{
  e.preventDefault();
  const name = document.getElementById("memberName").value.trim();
  const rank = document.getElementById("memberRank").value.trim();
  const status = document.getElementById("memberStatus").value;
  if(!name || !rank) return;
  members.push({name, rank, status});
  saveMembers();
  membersForm.reset();
  renderSanctions();
});

function saveMembers(){
  localStorage.setItem("pdMembers",JSON.stringify(members));
  renderMembers();
}
</script>

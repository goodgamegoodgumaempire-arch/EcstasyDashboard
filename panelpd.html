<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PanelPD - Poliție ECSTASY</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
body { font-family:'Roboto',sans-serif; background:#0b0c17; color:#fff; min-height:100vh; padding:20px;}
h1,h2 { color:#ff6600; }
.list { max-width:900px; margin-top:20px;}
.item { background: rgba(17,17,17,0.7); margin:10px 0; padding:12px; border-radius:8px; display:flex; justify-content:space-between; align-items:center;}
.item-actions button { margin-left:6px; padding:6px 12px; border:none; border-radius:6px; cursor:pointer; font-weight:bold;}
.accept-btn { background:#28a745; color:#fff; } .accept-btn:hover { background:#218838; }
.reject-btn { background:#dc3545; color:#fff; } .reject-btn:hover { background:#c82333; }
.delete-btn { background:#ff4444; color:#fff; } .delete-btn:hover { background:#cc0000; }
.status { font-weight:bold; margin-left:10px;}
form input { width:100%; margin:5px 0; padding:8px; border-radius:8px; border:none; background:#222; color:#fff;}
form button { margin-top:10px; padding:10px; border:none; border-radius:8px; background:#ff6600; color:#fff; font-weight:bold; cursor:pointer; }
form button:hover { background:#cc5200; }
</style>
</head>
<body>

<h1>PanelPD - Poliție</h1>

<h2>Setează Model Aplicație</h2>
<form id="modelForm">
    <div id="modelFields"></div>
    <button type="submit">Salvează Model</button>
</form>

<h2>Aplicații Poliție</h2>
<div id="applications" class="list"></div>

<script>
// --- Date inițiale ---
let aplicatii = JSON.parse(localStorage.getItem("aplicatii")) || [];
let modelPolitie = JSON.parse(localStorage.getItem("modelPolitie")) || ["Nume jucător","Motivație / Mesaj"];

// --- Render inputuri model ---
function renderModelInputs(){
    const container = document.getElementById("modelFields");
    container.innerHTML = "";
    modelPolitie.forEach((field,index)=>{
        const input = document.createElement("input");
        input.type = "text";
        input.value = field;
        input.placeholder = "Întrebare " + (index+1);
        input.id = `modelField_${index}`;
        container.appendChild(input);
    });

    const addBtn = document.createElement("button");
    addBtn.type = "button";
    addBtn.innerText = "Adaugă întrebare";
    addBtn.onclick = ()=>{
        modelPolitie.push("");
        renderModelInputs();
    };
    container.appendChild(addBtn);
}

// --- Salvează model ---
document.getElementById("modelForm").addEventListener("submit", function(e){
    e.preventDefault();
    const inputs = document.querySelectorAll("#modelFields input");
    modelPolitie = Array.from(inputs).map(i=>i.value.trim()).filter(i=>i!=="");
    localStorage.setItem("modelPolitie", JSON.stringify(modelPolitie));
    alert("Modelul aplicației Poliție a fost salvat!");
});

// --- Render aplicații ---
function renderAplicatii(){
    const container = document.getElementById("applications");
    container.innerHTML = "";
    aplicatii.forEach((a,i)=>{
        if(a.type !== "politie") return;
        const div = document.createElement("div");
        div.classList.add("item");
        let content = `<div><strong>${a.name}</strong> - Status: ${a.status || "În așteptare"}<br>`;
        a.answers.forEach((ans,j)=>{
            content += `<strong>${modelPolitie[j] || "Întrebare "+(j+1)}:</strong> ${ans}<br>`;
        });
        content += `</div>`;
        div.innerHTML = content;

        const actions = document.createElement("div");
        actions.classList.add("item-actions");

        const accept = document.createElement("button");
        accept.className="accept-btn"; accept.innerText="Acceptă";
        accept.onclick = ()=>{ a.status="Acceptat"; saveRender(); };

        const reject = document.createElement("button");
        reject.className="reject-btn"; reject.innerText="Respinge";
        reject.onclick = ()=>{ a.status="Respins"; saveRender(); };

        const del = document.createElement("button");
        del.className="delete-btn"; del.innerText="Șterge";
        del.onclick = ()=>{ aplicatii.splice(i,1); saveRender(); };

        actions.appendChild(accept);
        actions.appendChild(reject);
        actions.appendChild(del);
        div.appendChild(actions);
        container.appendChild(div);
    });
}

function saveRender(){
    localStorage.setItem("aplicatii", JSON.stringify(aplicatii));
    renderAplicatii();
}

// --- Inițializare ---
renderModelInputs();
renderAplicatii();
</script>

</body>
</html>

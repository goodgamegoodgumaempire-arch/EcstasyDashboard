<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PanelPD - Poliție ECSTASY</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
body { font-family:'Roboto',sans-serif; background:#0b0c17; color:#fff; min-height:100vh; padding:20px;}
h1,h2 { color:#ff6600; }
.list { max-width:900px; margin-top:20px;}
.item { background: rgba(17,17,17,0.7); margin:10px 0; padding:12px; border-radius:8px; display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap;}
.item-actions button { margin-left:6px; padding:6px 12px; border:none; border-radius:6px; cursor:pointer; font-weight:bold;}
.accept-btn { background:#28a745; color:#fff; } .accept-btn:hover { background:#218838; }
.reject-btn { background:#dc3545; color:#fff; } .reject-btn:hover { background:#c82333; }
.delete-btn { background:#ff4444; color:#fff; } .delete-btn:hover { background:#cc0000; }
.status { font-weight:bold; margin-left:10px;}
form input { width:100%; margin:5px 0; padding:8px; border-radius:8px; border:none; background:#222; color:#fff;}
form button { margin-top:10px; padding:10px; border:none; border-radius:8px; background:#ff6600; color:#fff; font-weight:bold; cursor:pointer; }
form button:hover { background:#cc5200; }
</style>
</head>
<body>

<h1>PanelPD - Poliție</h1>

<h2>Setează Model Aplicație Poliție</h2>
<form id="modelForm">
    <textarea id="modelPolitieTextarea" placeholder="Scrie fiecare întrebare pe câte un rând..."></textarea>
    <button type="submit">Salvează Model</button>
</form>

<h2>Aplicații Poliție</h2>
<div id="applications" class="list"></div>

<script>
// --- Preluare aplicații ---
let aplicatii = JSON.parse(localStorage.getItem("aplicatii")) || [];

// --- Preluare model ---
let modelPolitie = JSON.parse(localStorage.getItem("modelPolitie")) || ["Nume jucător","Motivație / Mesaj"];
document.getElementById("modelPolitieTextarea").value = modelPolitie.join("\n");

// --- Salvează model ---
document.getElementById("modelForm").addEventListener("submit", function(e){
    e.preventDefault();
    const text = document.getElementById("modelPolitieTextarea").value.trim();
    modelPolitie = text.split("\n").map(t=>t.trim()).filter(t=>t!=="");
    localStorage.setItem("modelPolitie", JSON.stringify(modelPolitie));
    alert("Modelul aplicației Poliție a fost salvat!");
});

// --- Render aplicații ---
function renderAplicatii(){
    const container = document.getElementById("applications");
    container.innerHTML="";
    aplicatii.forEach((a,i)=>{
        if(a.type!=="politie") return;
        const div = document.createElement("div");
        div.classList.add("item");

        // Conținut aplicație
        let content = `<div><strong>${a.name}</strong>`;
        if(a.answers) {
            a.answers.forEach((ans,j)=>{
                content += `<br><strong>${modelPolitie[j] || "Întrebare "+(j+1)}:</strong> ${ans}`;
            });
        } else {
            content += `<br>${a.message}`;
        }
        content += `<br><span class="status">${a.status||"În așteptare"}</span></div>`;
        div.innerHTML = content;

        // Acțiuni
        const actions = document.createElement("div");
        actions.classList.add("item-actions");

        const accept = document.createElement("button");
        accept.className="accept-btn"; accept.innerText="Acceptă"; 
        accept.onclick=()=>{ a.status="Acceptat"; saveRender(); };

        const reject = document.createElement("button");
        reject.className="reject-btn"; reject.innerText="Respinge";
        reject.onclick=()=>{ a.status="Respins"; saveRender(); };

        const del = document.createElement("button");
        del.className="delete-btn"; del.innerText="Șterge";
        del.onclick=()=>{ aplicatii.splice(i,1); saveRender(); };

        actions.appendChild(accept);
        actions.appendChild(reject);
        actions.appendChild(del);
        div.appendChild(actions);
        container.appendChild(div);
    });
}

// --- Salvează și rerandează ---
function saveRender(){
    localStorage.setItem("aplicatii", JSON.stringify(aplicatii));
    renderAplicatii();
}

// --- Init ---
renderAplicatii();
</script>

</body>
</html>
